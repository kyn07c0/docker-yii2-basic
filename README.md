## Описание 
Репозиторий содержит код, который позволяет собрать и протестировать двухконтейнерное приложение yii2 с использованием MariaDB в Docker.

## Структура
Проект состоит из двух контейнеров:
- jii2-web - содержит приложение jii2, веб-сервер Apache и php 7.4;
- jii2-db - содержит базу данных MariaDB 10.4;

```
├── docker
│   ├── docker-compose.yml
│   ├── mariadb
│   │   ├── Dockerfile
│   │   └── init_db_jii2.sql
│   └── php-apache
│       ├── apache.conf
│       ├── db.php
│       ├── Dockerfile
│       └── jii2
└── README.md
```

## Процесс CI
В корневой директории проекта находится файл .gitlab-ci.yml, который запускает процесс CI в случае появления новых коммитов в ветке develop. 
Процесс CI состоит из следующих этапов:
- Сборка приложения. На этом этапе собирается образ Docker с помощью docker-compose build;
- Тестирование. На этом этапе запускаются контейнеры jii2-web и jii2-db (docker-compose up -d) и выполняется тестирование в контексте web контейнера.

# Переменные Gitlab-CI
|Переменная|Описание|
|----------|--------|
|MARIADB_DATABASE|Название базы данных приложения jii2|
|MARIADB_USER|Пользователь базы данных jii2|
|MARIADB_PASSWORD|Пароль пользователя базы данных jii2|
|MARIADB_ROOT_PASSWORD|Пароль пользователя с правами администратора(root) базы данных MariaDB|
